(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-214a9372"],{"02f4":function(e,t,a){var i=a("4588"),r=a("be13");e.exports=function(e){return function(t,a){var l,n,o=String(r(t)),s=i(a),c=o.length;return s<0||s>=c?e?"":void 0:(l=o.charCodeAt(s),l<55296||l>56319||s+1===c||(n=o.charCodeAt(s+1))<56320||n>57343?e?o.charAt(s):l:e?o.slice(s,s+2):n-56320+(l-55296<<10)+65536)}}},"0390":function(e,t,a){"use strict";var i=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?i(e,t).length:1)}},"214f":function(e,t,a){"use strict";a("b0c5");var i=a("2aba"),r=a("32e9"),l=a("79e5"),n=a("be13"),o=a("2b4c"),s=a("520a"),c=o("species"),d=!l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var f=o(e),m=!l((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),h=m?!l((function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[c]=function(){return a}),a[f](""),!t})):void 0;if(!m||!h||"replace"===e&&!d||"split"===e&&!u){var p=/./[f],b=a(n,f,""[e],(function(e,t,a,i,r){return t.exec===s?m&&!r?{done:!0,value:p.call(t,a,i)}:{done:!0,value:e.call(a,t,i)}:{done:!1}})),v=b[0],g=b[1];i(String.prototype,e,v),r(RegExp.prototype,f,2==t?function(e,t){return g.call(e,this,t)}:function(e){return g.call(e,this)})}}},4917:function(e,t,a){"use strict";var i=a("cb7c"),r=a("9def"),l=a("0390"),n=a("5f1b");a("214f")("match",1,(function(e,t,a,o){return[function(a){var i=e(this),r=void 0==a?void 0:a[t];return void 0!==r?r.call(a,i):new RegExp(a)[t](String(i))},function(e){var t=o(a,e,this);if(t.done)return t.value;var s=i(e),c=String(this);if(!s.global)return n(s,c);var d=s.unicode;s.lastIndex=0;var u,f=[],m=0;while(null!==(u=n(s,c))){var h=String(u[0]);f[m]=h,""===h&&(s.lastIndex=l(c,r(s.lastIndex),d)),m++}return 0===m?null:f}]}))},"520a":function(e,t,a){"use strict";var i=a("0bfb"),r=RegExp.prototype.exec,l=String.prototype.replace,n=r,o="lastIndex",s=function(){var e=/a/,t=/b*/g;return r.call(e,"a"),r.call(t,"a"),0!==e[o]||0!==t[o]}(),c=void 0!==/()??/.exec("")[1],d=s||c;d&&(n=function(e){var t,a,n,d,u=this;return c&&(a=new RegExp("^"+u.source+"$(?!\\s)",i.call(u))),s&&(t=u[o]),n=r.call(u,e),s&&n&&(u[o]=u.global?n.index+n[0].length:t),c&&n&&n.length>1&&l.call(n[0],a,(function(){for(d=1;d<arguments.length-2;d++)void 0===arguments[d]&&(n[d]=void 0)})),n}),e.exports=n},"5f1b":function(e,t,a){"use strict";var i=a("23c6"),r=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var l=a.call(e,t);if("object"!==typeof l)throw new TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==i(e))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},a8fb:function(e,t,a){"use strict";var i=a("faa9"),r=a.n(i);r.a},b0c5:function(e,t,a){"use strict";var i=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:i!==/./.exec},{exec:i})},bb8c:function(e,t,a){"use strict";var i=a("e781"),r=a.n(i);r.a},e781:function(e,t,a){},f794:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-container",[a("el-main",{staticClass:"content-main"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.tableParams.tableLoading,expression:"tableParams.tableLoading"}],attrs:{"row-key":"id","element-loading-text":"Loading",height:e.tableParams.tableHeight,data:e.tableParams.tableData,"tree-props":e.tableParams.tableProps,"default-expand-all":"",border:"","highlight-current-row":""}},[a("el-table-column",{attrs:{prop:"ModuleTitle","column-key":"ModuleTitle",label:"菜单标题","min-width":"180",align:"left","show-overflow-tooltip":""},scopedSlots:e._u([{key:"header",fn:function(t){var i=t.column;return[a("span",[e._v(e._s(i.label))]),e._v(" "),a("el-button",{staticStyle:{padding:"0px"},attrs:{icon:"el-icon-circle-plus-outline",type:"text",title:"新增菜单"},on:{click:e.handleCreated}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Icon","column-key":"Icon",label:"图标",width:"80",align:"center"},scopedSlots:e._u([{key:"default",fn:function(e){var t=e.row;return[a("svg-icon",{attrs:{"icon-class":t.Icon}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"ModuleTag","column-key":"ModuleTag",label:"菜单标识",width:"180",align:"left","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ModuleAction","column-key":"ModuleAction",label:"菜单路由","min-width":"160",align:"left","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"ModuleLevel","column-key":"ModuleLevel",label:"层级",width:"80",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"IsAlwaysShow","column-key":"IsAlwaysShow",label:"显示根路由",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[1===i.IsAlwaysShow?a("i",{staticClass:"el-icon-circle-check",staticStyle:{color:"#13ce66","font-size":"18px"}}):e._e(),e._v(" "),1!==i.IsAlwaysShow?a("i",{staticClass:"el-icon-circle-close",staticStyle:{color:"#ff4949","font-size":"18px"}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"IsShow","column-key":"IsShow",label:"是否显示",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.row;return[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},on:{change:function(t){return e.handleSwitchChange(i)}},model:{value:i.IsShow,callback:function(t){e.$set(i,"IsShow",t)},expression:"row.IsShow"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{"column-key":"key",label:"操作",width:"120",align:"center",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticStyle:{padding:"0px"},attrs:{icon:"el-icon-edit",type:"text"},on:{click:function(a){return e.handleModify(t.row)}}}),e._v(" "),a("el-button",{staticStyle:{padding:"0px"},attrs:{icon:"el-icon-delete",type:"text"},on:{click:function(a){return e.handleDeleted(t.row)}}}),e._v(" "),a("el-button",{staticStyle:{padding:"0px"},attrs:{icon:"el-icon-postcard",type:"text"},on:{click:function(a){return e.handleUcList(t.row)}}})]}}])})],1)],1)],1),e._v(" "),a("el-drawer",{ref:"drawer",attrs:{size:"320px;","custom-class":"el-drawer-custom-class","destroy-on-close":"",title:e.editParams.drawerTitle,visible:e.editParams.drawerVisible},on:{"update:visible":function(t){return e.$set(e.editParams,"drawerVisible",t)}}},[a("div",{staticStyle:{display:"flex","flex-direction":"column",height:"100%",padding:"0 20px"}},[a("div",{staticStyle:{flex:"1"}},[a("el-form",{ref:"menuForm",attrs:{model:e.editParams.form,rules:e.editParams.rules}},[a("el-form-item",{attrs:{label:"菜单名称：",prop:"ModuleTitle","label-width":e.editParams.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入菜单名称",autocomplete:"off"},model:{value:e.editParams.form.ModuleTitle,callback:function(t){e.$set(e.editParams.form,"ModuleTitle",t)},expression:"editParams.form.ModuleTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"上级菜单：",prop:"ParentModuleId","label-width":e.editParams.formLabelWidth}},[a("el-select-tree",{attrs:{options:e.tableParams.tableData,props:e.editParams.defaultProps,value:e.editParams.form.ParentModuleId,isfilter:!1,disableditems:e.editParams.isModify?[e.editParams.form.id]:[],placeholder:"请选择上级菜单"},on:{getValue:function(t){return e.handleNodeChange(t)}}})],1),e._v(" "),a("el-form-item",{attrs:{label:"图标：",prop:"Icon","label-width":e.editParams.formLabelWidth}},[a("el-select",{attrs:{placeholder:"请选择图标"},model:{value:e.editParams.form.Icon,callback:function(t){e.$set(e.editParams.form,"Icon",t)},expression:"editParams.form.Icon"}},e._l(e.editParams.svgIcons,(function(t){return a("el-option",{key:t,attrs:{label:t,value:t}},[a("span",{staticStyle:{float:"left"}},[e._v(e._s(t))]),e._v(" "),a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[a("svg-icon",{attrs:{"icon-class":t}})],1)])})),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单标识：",prop:"ModuleTag","label-width":e.editParams.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入菜单标识",autocomplete:"off"},model:{value:e.editParams.form.ModuleTag,callback:function(t){e.$set(e.editParams.form,"ModuleTag",t)},expression:"editParams.form.ModuleTag"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"菜单路由：",prop:"ModuleAction","label-width":e.editParams.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入菜单路由",autocomplete:"off"},model:{value:e.editParams.form.ModuleAction,callback:function(t){e.$set(e.editParams.form,"ModuleAction",t)},expression:"editParams.form.ModuleAction"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"排序：",prop:"Sort","label-width":e.editParams.formLabelWidth}},[a("el-input-number",{staticStyle:{width:"100%"},attrs:{"controls-position":"right",min:1},model:{value:e.editParams.form.Sort,callback:function(t){e.$set(e.editParams.form,"Sort",t)},expression:"editParams.form.Sort"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"显示根路由：",prop:"IsAlwaysShow","label-width":e.editParams.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:e.editParams.form.IsAlwaysShow,callback:function(t){e.$set(e.editParams.form,"IsAlwaysShow",t)},expression:"editParams.form.IsAlwaysShow"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示：",prop:"IsShow","label-width":e.editParams.formLabelWidth}},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":1,"inactive-value":0},model:{value:e.editParams.form.IsShow,callback:function(t){e.$set(e.editParams.form,"IsShow",t)},expression:"editParams.form.IsShow"}})],1)],1)],1),e._v(" "),a("div",{staticStyle:{display:"flex",padding:"10px 0"}},[a("el-button",{staticStyle:{flex:"1"},on:{click:function(t){e.editParams.drawerVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticStyle:{flex:"1"},attrs:{type:"primary",loading:e.editParams.submitLoading},on:{click:e.handleSave}},[e._v(e._s(e.editParams.submitLoading?"提交中...":"确 定"))])],1)])]),e._v(" "),a("el-drawer",{ref:"drawer",attrs:{size:"320px;","custom-class":"el-drawer-custom-class","destroy-on-close":"",title:e.ucParams.drawerTitle,visible:e.ucParams.drawerVisible},on:{"update:visible":function(t){return e.$set(e.ucParams,"drawerVisible",t)}}},[a("div",{staticStyle:{display:"flex","flex-direction":"column",height:"100%",padding:"0 20px"}},[a("div",{staticStyle:{flex:"1",border:"1px red"}}),e._v(" "),a("div",{staticStyle:{display:"flex",padding:"10px 0"}},[a("el-button",{staticStyle:{flex:"1"},on:{click:function(t){e.ucParams.drawerVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{staticStyle:{flex:"1"},attrs:{type:"primary",loading:e.editParams.submitLoading},on:{click:e.handleSave}},[e._v(e._s(e.editParams.submitLoading?"提交中...":"确 定"))])],1)])])],1)},r=[],l=a("8593"),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-select",{ref:"treeSelect",attrs:{value:e.valueTitle,clearable:e.clearable,placeholder:e.placeholder},on:{clear:e.clearHandle}},[e.isfilter?a("el-input",{staticClass:"selectInput",attrs:{placeholder:e.filterPlaceholder},model:{value:e.filterText,callback:function(t){e.filterText=t},expression:"filterText"}}):e._e(),e._v(" "),a("el-option",{staticClass:"options",attrs:{value:e.valueTitle,label:e.valueTitle}},[a("el-tree",{ref:"selectTree",attrs:{id:"tree-option",accordion:e.accordion,data:e.options,"node-key":e.props.value,props:e.props,"default-expanded-keys":e.defaultExpandedKey,"filter-node-method":e.filterNode},on:{"node-click":e.handleNodeClick}})],1)],1)},o=[],s=(a("ac6a"),{name:"SelectTree",filters:{},components:{},props:{props:{type:Object,default:function(){return{value:"id",label:"title",children:"children",disabled:"disabled"}}},options:{type:Array,default:function(){return[]}},value:{type:String,default:function(){return""}},clearable:{type:Boolean,default:function(){return!0}},accordion:{type:Boolean,default:function(){return!0}},disableditems:{type:Array,default:function(){return[]}},placeholder:{type:String,default:function(){return"请选择"}},isfilter:{type:Boolean,default:function(){return!0}},filterPlaceholder:{type:String,default:function(){return"检索关键字"}}},data:function(){return{screenHeight:0,filterText:"",valueId:this.value,valueTitle:"",defaultExpandedKey:[]}},computed:{},watch:{value:function(){this.valueId=this.value,this.initHandle()},filterText:function(e){this.$refs.selectTree.filter(e)}},created:function(){},mounted:function(){this.initHandle()},methods:{initPage:function(){},setPageHeight:function(){this.screenHeight=document.body.clientHeight,this.tableParams.tableHeight=this.screenHeight-182},initHandle:function(){this.valueId&&(this.valueTitle=this.$refs.selectTree.getNode(this.valueId).data[this.props.label],this.$refs.selectTree.setCurrentKey(this.valueId),this.defaultExpandedKey=[this.valueId]),this.initScroll()},initScroll:function(){this.$nextTick((function(){var e=document.querySelectorAll(".el-scrollbar .el-select-dropdown__wrap")[0],t=document.querySelectorAll(".el-scrollbar .el-scrollbar__bar");e.style.cssText="margin:0px;max-height:none;overflow:hidden;",t.forEach((function(e){return e.style.width=0}))}))},handleNodeClick:function(e){this.disableditems instanceof Array&&this.disableditems.length>0&&this.disableditems.indexOf(e[this.props.value])>-1||(this.valueTitle=e[this.props.label],this.valueId=e[this.props.value],this.$emit("getValue",this.valueId),this.defaultExpandedKey=[],e.children&&e.children.length||this.$refs.treeSelect.blur())},clearHandle:function(){this.valueTitle="",this.valueId="",this.defaultExpandedKey=[],this.clearSelected(),this.$emit("getValue","")},clearSelected:function(){var e=document.querySelectorAll("#tree-option .el-tree-node");e.forEach((function(e){return e.classList.remove("is-current")}))},filterNode:function(e,t){return!e||-1!==t[this.props.label].indexOf(e)}}}),c=s,d=(a("a8fb"),a("2877")),u=Object(d["a"])(c,n,o,!1,null,"b82974a2",null),f=u.exports,m=a("fc00"),h={name:"Menu",filters:{},components:{"el-select-tree":f},props:{},data:function(){return{screenHeight:0,requestParams:{pageIndex:1,pageSize:10,orderby:"",sort:0,searchKey:"",state:-1},tableParams:{tableLoading:!1,tableHeight:0,tableProps:{children:"Children",hasChildren:"hasChildren"},tableColumns:[],tableData:[],total:0,layoutOptions:"total, sizes, prev, pager, next, jumper",pageSizeOptions:["10","20","30","50","100","200"],multipleSelection:[]},editParams:{isModify:!1,drawerVisible:!1,drawerTitle:"提示",submitLoading:!1,formLabelWidth:"100px",svgIcons:m["a"],form:{id:"",ModuleTag:"",ModuleTitle:"",ModuleAction:"",Icon:"",ParentModuleId:"",ModuleLevel:1,Sort:0,IsAlwaysShow:0,IsShow:0},defaultProps:{value:"id",label:"ModuleTitle",children:"Children",disabled:"Disabled"},defaultData:[],rules:{ModuleTitle:[{required:!0,message:"请输入菜单名称",trigger:"blur"}],Icon:[{required:!0,message:"请选择图标",trigger:"blur"}],ModuleTag:[{required:!0,message:"请输入菜单标识",trigger:"blur"}],ModuleAction:[{required:!0,message:"请输入菜单路由",trigger:"blur"}],Sort:[{type:"number",message:"排序不合法",trigger:"blur"}],IsShow:[{type:"number",message:"不合法",trigger:"blur"}]}},ucParams:{drawerVisible:!1,drawerTitle:"菜单用例"}}},computed:{},watch:{},created:function(){},mounted:function(){var e=this;this.$nextTick((function(t){return e.initPage()}));var t=null;window.onresize=function(a){return function(a){t&&(clearTimeout(t),t=null),t=setTimeout((function(t){return e.setPageHeight()}),500)}()}},methods:{initPage:function(){this.setPageHeight(),this.getTableColumns(),this.getTableData()},setPageHeight:function(){this.screenHeight=document.body.clientHeight,this.tableParams.tableHeight=this.screenHeight-90},getTableColumns:function(){var e=this;this.tableParams.tableColumns=[{columnName:"rowIdx",columnLabel:"序号",columnWidth:58,align:"center",headerAlign:"center",sortable:!1,fixed:!0,show:!0},{columnName:"state",columnLabel:"状态",columnWidth:80,align:"center",headerAlign:"center",sortable:!1,fixed:!1,show:!0,formatter:function(t,a,i){var r=e.$createElement;return r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":0,"inactive-value":1,value:i,rowid:t.id}})}}]},getSearchParam:function(){var e={};for(var t in this.requestParams)if(this.requestParams.hasOwnProperty(t)){var a=this.requestParams[t];a instanceof Array?!a.length||1===a.length&&-1===a[0]||(e[t]=a):0!==a&&!a||-1===a||""!==a&&(e[t]=a)}return e},getTableData:function(){var e=this;this.tableParams.tableLoading=!0,Object(l["d"])(this.getSearchParam()).then((function(t){e.tableParams.tableData=t.data,e.tableParams.tableLoading=!1})).catch((function(t){e.$message.error({message:t.message||"请求出错"}),e.tableParams.tableLoading=!1}))},handleSizeChange:function(e){this.requestParams.pageIndex=1,this.requestParams.pageSize=e,this.getTableData()},handleCurrentChange:function(e){this.requestParams.pageIndex=e,this.getTableData()},handleNodeChange:function(e){this.editParams.form.ParentModuleId=e},handleSwitchChange:function(e){var t=this;Object(l["o"])(e.id,1===e.IsShow).catch((function(e){t.$message.error({message:e.message||"请求出错"}),t.getTableData()}))},handleCreated:function(){this.editParams.isModify=!1,this.editParams.drawerTitle="新增菜单",this.editParams.drawerVisible=!0,this.editParams.submitLoading=!1,this.editParams.form={ModuleTag:"",ModuleTitle:"",ModuleAction:"",Icon:"",ParentModuleId:"",ModuleLevel:1,Sort:1,IsAlwaysShow:0,IsShow:1}},handleModify:function(e){this.editParams.isModify=!0,this.editParams.drawerTitle="修改菜单",this.editParams.drawerVisible=!0,this.editParams.submitLoading=!1,this.editParams.form=JSON.parse(JSON.stringify(e))},handleDeleted:function(e){var t=this;this.$confirm("此操作将永久删除菜单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["m"])([e.id]).then((function(e){return t.getTableData()})).catch((function(e){t.$message.error({message:e.message||"请求出错"})}))})).catch((function(){}))},handleSave:function(){var e=this;this.editParams.submitLoading=!0,this.$refs.menuForm.validate((function(t){if(!t)return e.editParams.submitLoading=!1,!1;Object(l["j"])(e.editParams.form,e.editParams.isModify).then((function(t){e.editParams.drawerVisible=!1,e.editParams.submitLoading=!1,e.getTableData()})).catch((function(t){e.$message.error({message:t.message||"请求出错"}),e.editParams.submitLoading=!1}))}))},handleUcList:function(e){this.ucParams.drawerTitle="".concat(e.ModuleTitle,"用例列表"),this.ucParams.drawerVisible=!0}}},p=h,b=(a("bb8c"),Object(d["a"])(p,i,r,!1,null,"461f8db0",null));t["default"]=b.exports},faa9:function(e,t,a){},fc00:function(e,t,a){"use strict";a("4917"),a("ac6a");var i=a("51ff"),r=function(e){return e.keys()},l=/\.\/(.*)\.svg/,n=r(i).map((function(e){return e.match(l)[1]}));t["a"]=n}}]);